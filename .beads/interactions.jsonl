{"id":"django-litefs-0ec","title":"Create README.md with quick-start guide","description":"No user-facing README.md exists. First-time users see nothing. Need: project description, installation instructions, minimal usage example, configuration overview, links to docs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T23:46:33.332318+01:00","updated_at":"2025-12-26T00:18:21.89128+01:00","closed_at":"2025-12-26T00:18:21.89128+01:00","close_reason":"Already implemented"}
{"id":"django-litefs-0p0","title":"Write BDD step definitions for middleware - configuration","description":"Create step definitions for configuration scenarios (9 scenarios).\n\nLocation: tests/bdd/django/test_middleware.py\n\nCovers:\n- Write forwarding disabled by default\n- Explicit disable\n- Timeout configuration\n- Path exclusions\n- LiteFS disabled\n- Settings missing\n- Middleware order (split-brain before forwarding)\n\nUses: ForwardingSettings, WriteForwardingMiddleware\nTRA: BDD.Middleware.Configuration","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:31:03.134394+01:00","updated_at":"2025-12-26T22:31:03.134394+01:00","dependencies":[{"issue_id":"django-litefs-0p0","depends_on_id":"django-litefs-619","type":"blocks","created_at":"2025-12-26T22:31:52.520167+01:00","created_by":"daemon"},{"issue_id":"django-litefs-0p0","depends_on_id":"django-litefs-ujq","type":"blocks","created_at":"2025-12-26T22:31:52.756435+01:00","created_by":"daemon"}]}
{"id":"django-litefs-0qr","title":"Create FailoverEvent domain value object","description":"Domain VO for failover events (health-triggered demotion, quorum-loss demotion, state transitions). Enables 'event is emitted' assertions in BDD scenarios. Location: packages/litefs/src/litefs/domain/failover.py","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:53:36.911219+01:00","updated_at":"2025-12-26T21:16:06.227229+01:00","closed_at":"2025-12-26T21:16:06.227229+01:00","close_reason":"Already implemented: packages/litefs/src/litefs/domain/events.py contains FailoverEvent and FailoverEventType"}
{"id":"django-litefs-0r1","title":"Add StaticLeaderConfig value object","description":"Create StaticLeaderConfig dataclass in litefs/domain/settings.py with primary_node_id field. Add to LiteFSSettings as optional static_config field. Validate that static_config is present when leader_election=\"static\".","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:12:44.205939+01:00","updated_at":"2025-12-25T14:14:01.289208+01:00","closed_at":"2025-12-25T14:14:01.289208+01:00","close_reason":"Closed","labels":["domain","raft-001"]}
{"id":"django-litefs-0tv","title":"Write BDD step definitions for database backend - error messages and optional detector","description":"Add step definitions for error message quality (2 scenarios) and optional split-brain detector (3 scenarios). Verify error messages include helpful context and backend works without split-brain detector.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:37.694448+01:00","updated_at":"2025-12-26T22:15:37.694448+01:00","dependencies":[{"issue_id":"django-litefs-0tv","depends_on_id":"django-litefs-5l8","type":"blocks","created_at":"2025-12-26T22:16:14.110053+01:00","created_by":"daemon"}]}
{"id":"django-litefs-1ix","title":"Add __all__ exports to litefs_django __init__.py","description":"litefs_django/__init__.py only exports split_brain_detected signal. Add __all__ with: LiteFSDjangoConfig, NotPrimaryError, SplitBrainError, get_litefs_settings for clear public API.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T23:46:38.055641+01:00","updated_at":"2025-12-26T00:18:21.896164+01:00","closed_at":"2025-12-26T00:18:21.896164+01:00","close_reason":"Already implemented"}
{"id":"django-litefs-21o","title":"Document read-your-writes consistency pattern with LiteFS proxy","description":"## Context\nUsers deploying Django with LiteFS behind a load balancer need to understand how to achieve read-your-writes consistency. The LiteFS proxy handles this automatically, but this pattern isn't documented.\n\n## Requirements\n1. Add `.claude/docs/CONSISTENCY.md` explaining:\n   - The consistency problem (async replication + load balancer)\n   - How LiteFS proxy solves it (TXID cookies, replica stalling)\n   - Architecture diagram showing proxy placement\n   - Full litefs.yml example with proxy config\n   - Django settings example\n\n2. Update `DEPLOYMENT.md` to reference consistency docs\n\n3. Add a section to package README covering:\n   - Quick proxy setup for consistency\n   - Link to detailed docs\n\n## Acceptance Criteria\n- [ ] CONSISTENCY.md with clear diagrams and examples\n- [ ] DEPLOYMENT.md updated with link\n- [ ] README includes proxy quick-start","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T00:48:44.179299+01:00","updated_at":"2025-12-26T08:00:46.142253+01:00","closed_at":"2025-12-26T08:00:46.142253+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-21o","depends_on_id":"django-litefs-cux","type":"blocks","created_at":"2025-12-26T00:49:10.077425+01:00","created_by":"daemon"}]}
{"id":"django-litefs-21t","title":"Write BDD step definitions for middleware - error handling","description":"Create step definitions for forwarding error scenarios (3 scenarios).\n\nLocation: tests/bdd/django/test_middleware.py\n\nCovers:\n- Primary unreachable -\u003e 503\n- Timeout -\u003e 504\n- Retry on transient failure\n\nUses: WriteForwardingMiddleware, FakeHttpForwardingAdapter\nTRA: BDD.Middleware.ErrorHandling","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:30:54.173586+01:00","updated_at":"2025-12-26T22:30:54.173586+01:00","dependencies":[{"issue_id":"django-litefs-21t","depends_on_id":"django-litefs-ujq","type":"blocks","created_at":"2025-12-26T22:31:52.071945+01:00","created_by":"daemon"},{"issue_id":"django-litefs-21t","depends_on_id":"django-litefs-ir5","type":"blocks","created_at":"2025-12-26T22:31:52.294488+01:00","created_by":"daemon"}]}
{"id":"django-litefs-2i4","title":"Add unit tests for SplitBrainDetector use case","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:38.263587+01:00","updated_at":"2025-12-25T23:38:29.947715+01:00","closed_at":"2025-12-25T23:38:29.947715+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-2i4","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T23:04:04.039811+01:00","created_by":"daemon"}]}
{"id":"django-litefs-2zn","title":"Fix CI Pipeline Failures","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-26T09:59:39.243562+01:00","updated_at":"2025-12-26T09:59:39.243562+01:00","dependencies":[{"issue_id":"django-litefs-2zn","depends_on_id":"django-litefs-2zn.1","type":"blocks","created_at":"2025-12-26T09:59:59.147875+01:00","created_by":"daemon"},{"issue_id":"django-litefs-2zn","depends_on_id":"django-litefs-2zn.2","type":"blocks","created_at":"2025-12-26T09:59:59.357848+01:00","created_by":"daemon"},{"issue_id":"django-litefs-2zn","depends_on_id":"django-litefs-2zn.3","type":"blocks","created_at":"2025-12-26T09:59:59.556937+01:00","created_by":"daemon"}]}
{"id":"django-litefs-2zn.1","title":"Add ruff as dev dependency and fix CI lint step","description":"The CI workflow runs 'uv sync --no-dev \u0026\u0026 uv run ruff check src/' but ruff is not listed as a dependency anywhere. This causes 'Failed to spawn: ruff - No such file or directory' error. Need to either:\n- Add ruff as a dev dependency to all packages\n- Change CI to use 'uv sync' instead of '--no-dev'\nLocation: .github/workflows/test.yml:40-46 and packages/*/pyproject.toml","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T09:59:45.552702+01:00","updated_at":"2025-12-26T21:07:52.44553+01:00","closed_at":"2025-12-26T21:07:52.44553+01:00","close_reason":"Closed"}
{"id":"django-litefs-2zn.2","title":"Add TRA markers to integration docker tests","description":"21 tests in tests/core/integration/docker/ are missing @pytest.mark.tra('...') or @pytest.mark.legacy markers. Files affected:\n- test_multi_node_cluster.py (12 tests)\n- test_partition_healing.py (9 tests)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:59:46.97092+01:00","updated_at":"2025-12-26T21:48:42.998834+01:00","closed_at":"2025-12-26T21:48:42.998834+01:00","close_reason":"Closed"}
{"id":"django-litefs-2zn.3","title":"Fix invalid TRA anchor formats","description":"14 tests use invalid TRA anchors like 'Integration' and 'Port' that don't follow the required pattern. Valid anchors must start with: Adapter., Contract., Domain.Invariant., Domain.Policy., Port., UseCase.. Files affected:\n- tests/core/integration/test_cluster_fixture.py (11 tests using 'Integration')\n- tests/core/integration/usecases/test_primary_detector_concurrency.py (3 tests using 'Integration')\n- tests/core/unit/adapters/test_ports.py (tests using 'Port')","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:59:48.919269+01:00","updated_at":"2025-12-26T21:07:23.784245+01:00","closed_at":"2025-12-26T21:07:23.784245+01:00","close_reason":"Closed"}
{"id":"django-litefs-33u","title":"Add Hypothesis property tests for split-brain detection logic","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:45.996102+01:00","updated_at":"2025-12-25T23:54:56.858034+01:00","closed_at":"2025-12-25T23:54:56.858034+01:00","close_reason":"Tests verified and passing. For upc: 7 new concurrency tests added. For others: tests already existed with comprehensive coverage.","dependencies":[{"issue_id":"django-litefs-33u","depends_on_id":"django-litefs-def","type":"blocks","created_at":"2025-12-25T23:04:06.142352+01:00","created_by":"daemon"},{"issue_id":"django-litefs-33u","depends_on_id":"django-litefs-2i4","type":"blocks","created_at":"2025-12-25T23:04:06.305858+01:00","created_by":"daemon"}]}
{"id":"django-litefs-38o","title":"Add TRA/tier enforcement to conftest.py","description":"Add pytest plugin to tests/conftest.py that: 1) Fails collection if test missing TRA marker, 2) Fails collection if test missing tier marker, 3) Enforces tier timeouts. Use templates from ~/.claude/skills/test-architecture/templates/python/. Start with enforcement='warn' during migration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:49:57.862168+01:00","updated_at":"2025-12-26T01:10:25.04903+01:00","closed_at":"2025-12-26T01:10:25.04903+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-38o","depends_on_id":"django-litefs-gth","type":"blocks","created_at":"2025-12-25T23:50:09.142532+01:00","created_by":"daemon"},{"issue_id":"django-litefs-38o","depends_on_id":"django-litefs-3j5","type":"blocks","created_at":"2025-12-25T23:50:09.299113+01:00","created_by":"daemon"}]}
{"id":"django-litefs-3b6","title":"Fix Clean Architecture violations in Django adapter","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T00:55:03.121457+01:00","updated_at":"2025-12-26T01:35:05.385554+01:00","closed_at":"2025-12-26T01:35:05.385554+01:00","close_reason":"All Clean Architecture violations fixed","dependencies":[{"issue_id":"django-litefs-3b6","depends_on_id":"django-litefs-3b6.1","type":"blocks","created_at":"2025-12-26T00:55:38.378387+01:00","created_by":"daemon"},{"issue_id":"django-litefs-3b6","depends_on_id":"django-litefs-3b6.2","type":"blocks","created_at":"2025-12-26T00:55:38.542415+01:00","created_by":"daemon"},{"issue_id":"django-litefs-3b6","depends_on_id":"django-litefs-3b6.3","type":"blocks","created_at":"2025-12-26T00:55:38.696328+01:00","created_by":"daemon"},{"issue_id":"django-litefs-3b6","depends_on_id":"django-litefs-3b6.4","type":"blocks","created_at":"2025-12-26T00:55:38.856518+01:00","created_by":"daemon"}]}
{"id":"django-litefs-3b6.1","title":"Fix missing import in health check view","description":"Location: packages/litefs-django/src/litefs_django/views.py:66\n\nProblem: References 'from litefs.usecases.leader_election import RaftLeaderElection' which doesn't exist in the litefs package.\n\nFix: Either use factory from 'litefs.factories' or correct the import path to reference the actual implementation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T00:55:07.082199+01:00","updated_at":"2025-12-26T01:34:50.373793+01:00","closed_at":"2025-12-26T01:34:50.373793+01:00","close_reason":"Fixed Clean Architecture violations in Django adapter"}
{"id":"django-litefs-3b6.2","title":"Extract inline StaticLeaderElection class from view","description":"Location: packages/litefs-django/src/litefs_django/views.py:85-101\n\nProblem: StaticLeaderElection class is defined inline inside get_failover_coordinator() function. This violates separation of concerns and makes testing harder.\n\nFix: Extract to proper module (e.g., litefs_django/ports.py or litefs_django/adapters/leader_election.py), implement as proper port implementation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T00:55:10.58091+01:00","updated_at":"2025-12-26T01:34:50.376156+01:00","closed_at":"2025-12-26T01:34:50.376156+01:00","close_reason":"Fixed Clean Architecture violations in Django adapter"}
{"id":"django-litefs-3b6.3","title":"Replace hasattr workaround with proper Protocol check in middleware","description":"Location: packages/litefs-django/src/litefs_django/middleware.py:112\n\nProblem: Uses 'hasattr(detector_port, \"get_cluster_state\")' for duck-typing instead of proper protocol/type checking.\n\nFix: Use isinstance() with Protocol or create proper factory/adapter that guarantees the interface.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T00:55:14.26246+01:00","updated_at":"2025-12-26T01:34:50.377396+01:00","closed_at":"2025-12-26T01:34:50.377396+01:00","close_reason":"Fixed Clean Architecture violations in Django adapter"}
{"id":"django-litefs-3b6.4","title":"Refactor AppConfig to use dependency injection instead of direct instantiation","description":"Location: packages/litefs-django/src/litefs_django/apps.py\n\nProblem: Directly instantiates MountValidator(), EnvironmentNodeIDResolver(), PrimaryInitializer(), and PrimaryDetector() instead of using dependency injection or factories.\n\nFix: Implement factory pattern or accept injected dependencies via settings or constructor to allow testing and flexibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T00:55:17.925137+01:00","updated_at":"2025-12-26T01:34:50.378493+01:00","closed_at":"2025-12-26T01:34:50.378493+01:00","close_reason":"Fixed Clean Architecture violations in Django adapter"}
{"id":"django-litefs-3j5","title":"Add tier markers and remove legacy markers","description":"Replace 145 legacy markers (unit, integration, property, concurrency) with @pytest.mark.tier(N). Mapping: unit→tier(1), integration→tier(3), property→tier(3), concurrency→tier(2). Measure actual test runtimes with pytest --durations=0 to assign correct tiers.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:49:56.808926+01:00","updated_at":"2025-12-26T00:45:21.383789+01:00","closed_at":"2025-12-26T00:45:21.383789+01:00","close_reason":"Tests pass, work complete","dependencies":[{"issue_id":"django-litefs-3j5","depends_on_id":"django-litefs-ayv","type":"blocks","created_at":"2025-12-25T23:50:08.978318+01:00","created_by":"daemon"}]}
{"id":"django-litefs-3yh","title":"Add port contract tests for SplitBrainDetectorPort","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:39.19257+01:00","updated_at":"2025-12-25T23:38:29.948786+01:00","closed_at":"2025-12-25T23:38:29.948786+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-3yh","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T23:04:04.188812+01:00","created_by":"daemon"}]}
{"id":"django-litefs-45i","title":"Write BDD step definitions for middleware - write detection","description":"Create step definitions for write request detection scenarios (9 scenarios).\n\nLocation: tests/bdd/django/test_middleware.py\n\nCovers:\n- POST/PUT/PATCH/DELETE detected as write\n- GET/HEAD/OPTIONS detected as read\n- Primary node behavior (no forwarding)\n\nUses: WriteForwardingMiddleware, FakePrimaryDetector\nTRA: BDD.Middleware.WriteDetection","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:30:33.099216+01:00","updated_at":"2025-12-26T22:30:33.099216+01:00","dependencies":[{"issue_id":"django-litefs-45i","depends_on_id":"django-litefs-ujq","type":"blocks","created_at":"2025-12-26T22:31:51.394797+01:00","created_by":"daemon"}]}
{"id":"django-litefs-4m9","title":"Create EventEmitterPort interface","description":"Port for emitting failover events. Enables testing via fake adapter. Interface: emit(event: FailoverEvent) -\u003e None. Location: packages/litefs/src/litefs/adapters/ports.py","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:53:38.853192+01:00","updated_at":"2025-12-26T21:16:06.435161+01:00","closed_at":"2025-12-26T21:16:06.435161+01:00","close_reason":"Already implemented: packages/litefs/src/litefs/adapters/ports.py contains EventEmitterPort","dependencies":[{"issue_id":"django-litefs-4m9","depends_on_id":"django-litefs-0qr","type":"blocks","created_at":"2025-12-26T13:54:04.076657+01:00","created_by":"daemon"}]}
{"id":"django-litefs-4p8","title":"Epic: Graceful Split-Brain Handling","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-25T22:57:06.56309+01:00","updated_at":"2025-12-26T01:10:26.397832+01:00","closed_at":"2025-12-26T01:10:26.397832+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T22:58:35.770372+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-5la","type":"blocks","created_at":"2025-12-25T22:58:35.901802+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-g0l","type":"blocks","created_at":"2025-12-25T22:58:36.032507+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-j74","type":"blocks","created_at":"2025-12-25T22:58:36.16243+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-zaw","type":"blocks","created_at":"2025-12-25T22:58:36.29477+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-6d1","type":"blocks","created_at":"2025-12-25T22:58:36.424224+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-def","type":"blocks","created_at":"2025-12-25T23:04:08.184884+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-2i4","type":"blocks","created_at":"2025-12-25T23:04:08.351248+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-3yh","type":"blocks","created_at":"2025-12-25T23:04:08.501419+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-8t1","type":"blocks","created_at":"2025-12-25T23:04:08.664786+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-4xv","type":"blocks","created_at":"2025-12-25T23:04:08.841097+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-6od","type":"blocks","created_at":"2025-12-25T23:04:09.029509+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-33u","type":"blocks","created_at":"2025-12-25T23:04:09.209965+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-upc","type":"blocks","created_at":"2025-12-25T23:04:09.527582+01:00","created_by":"daemon"},{"issue_id":"django-litefs-4p8","depends_on_id":"django-litefs-97j","type":"blocks","created_at":"2025-12-25T23:11:35.363856+01:00","created_by":"daemon"}]}
{"id":"django-litefs-4xv","title":"Add Django middleware tests for split-brain detection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:41.904009+01:00","updated_at":"2025-12-25T23:54:56.858852+01:00","closed_at":"2025-12-25T23:54:56.858852+01:00","close_reason":"Tests verified and passing. For upc: 7 new concurrency tests added. For others: tests already existed with comprehensive coverage.","dependencies":[{"issue_id":"django-litefs-4xv","depends_on_id":"django-litefs-5la","type":"blocks","created_at":"2025-12-25T23:04:04.49118+01:00","created_by":"daemon"}]}
{"id":"django-litefs-4zv","title":"Write BDD step definitions for database backend - maintenance and WAL","description":"Add step definitions for database maintenance (3 scenarios: VACUUM/REINDEX/ANALYZE) and WAL mode enforcement (2 scenarios). These verify maintenance ops blocked on replica and WAL mode enforced.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:31.677065+01:00","updated_at":"2025-12-26T22:15:31.677065+01:00"}
{"id":"django-litefs-519","title":"Create HttpxForwardingAdapter","description":"Create production HTTP forwarding adapter using httpx.\n\nLocation: packages/litefs-django/src/litefs_django/adapters.py\n\nFeatures:\n- Implements HttpForwardingPort\n- Uses httpx for async-capable HTTP client\n- Configurable timeout\n- Retry with exponential backoff\n- Proper error mapping (timeout -\u003e 504, connection error -\u003e 503)\n- Logging of forwarded requests\n\nEnables scenarios: Production forwarding behavior\nTRA: Adapter.HttpxForwardingAdapter","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:30:14.785935+01:00","updated_at":"2025-12-26T22:30:14.785935+01:00","dependencies":[{"issue_id":"django-litefs-519","depends_on_id":"django-litefs-pll","type":"blocks","created_at":"2025-12-26T22:31:40.203301+01:00","created_by":"daemon"}]}
{"id":"django-litefs-5l8","title":"Create FakeSplitBrainDetector in django_adapter fakes","description":"Move/copy FakeSplitBrainDetectorPort from tests/bdd/core to tests/django_adapter/unit/fakes.py for reuse in database backend tests. Should implement SplitBrainDetectorPort with configurable state for testing split-brain scenarios.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T22:14:47.329978+01:00","updated_at":"2025-12-26T22:37:28.327576+01:00","closed_at":"2025-12-26T22:37:28.327576+01:00","close_reason":"Closed"}
{"id":"django-litefs-5la","title":"Add Django signals/middleware for split-brain","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:58:15.26966+01:00","updated_at":"2025-12-25T23:38:29.950682+01:00","closed_at":"2025-12-25T23:38:29.950682+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-5la","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T22:58:37.596823+01:00","created_by":"daemon"}]}
{"id":"django-litefs-5tc","title":"Update Django AppConfig for primary initialization","description":"Modify litefs_django/apps.py ready() hook to call PrimaryInitializer.initialize_if_needed() on startup. Log which node is designated primary.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:12:57.99904+01:00","updated_at":"2025-12-25T14:14:01.293189+01:00","closed_at":"2025-12-25T14:14:01.293189+01:00","close_reason":"Closed","labels":["django","raft-001"],"dependencies":[{"issue_id":"django-litefs-5tc","depends_on_id":"django-litefs-ame","type":"blocks","created_at":"2025-12-25T14:13:06.842499+01:00","created_by":"daemon"},{"issue_id":"django-litefs-5tc","depends_on_id":"django-litefs-cip","type":"blocks","created_at":"2025-12-25T14:13:06.986504+01:00","created_by":"daemon"}]}
{"id":"django-litefs-619","title":"Create ForwardingSettings domain value object","description":"Create ForwardingSettings value object for write forwarding configuration.\n\nLocation: packages/litefs/src/litefs/domain/settings.py (or new forwarding.py)\n\nFields:\n- enabled: bool (default False)\n- primary_url: str | None\n- timeout_seconds: float (default 30.0)\n- retry_count: int (default 1)\n- excluded_paths: list[str] (default [])\n\nEnables scenarios: Write forwarding configuration, timeout configuration, path exclusions\nTRA: Domain.Invariant.ForwardingSettings","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:29:34.25498+01:00","updated_at":"2025-12-26T22:29:34.25498+01:00"}
{"id":"django-litefs-6d1","title":"Add Docker Compose integration tests for failover scenarios","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:58:20.502609+01:00","updated_at":"2025-12-26T00:45:21.382097+01:00","closed_at":"2025-12-26T00:45:21.382097+01:00","close_reason":"Tests pass, work complete","dependencies":[{"issue_id":"django-litefs-6d1","depends_on_id":"django-litefs-5la","type":"blocks","created_at":"2025-12-25T22:58:39.455344+01:00","created_by":"daemon"},{"issue_id":"django-litefs-6d1","depends_on_id":"django-litefs-j74","type":"blocks","created_at":"2025-12-25T22:58:39.589463+01:00","created_by":"daemon"}]}
{"id":"django-litefs-6nw","title":"Write BDD step definitions for database backend - write guarding","description":"Add step definitions for write operation guarding scenarios (11 scenarios). Covers: write succeeds on primary, NotPrimaryError on replica for INSERT/UPDATE/DELETE/CREATE/DROP/ALTER, SELECT succeeds on replica.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:09.618895+01:00","updated_at":"2025-12-26T22:15:09.618895+01:00"}
{"id":"django-litefs-6od","title":"Add FastAPI health endpoint tests with split-brain field","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:43.110815+01:00","updated_at":"2025-12-25T23:54:56.859805+01:00","closed_at":"2025-12-25T23:54:56.859805+01:00","close_reason":"Tests verified and passing. For upc: 7 new concurrency tests added. For others: tests already existed with comprehensive coverage.","dependencies":[{"issue_id":"django-litefs-6od","depends_on_id":"django-litefs-g0l","type":"blocks","created_at":"2025-12-25T23:04:04.641808+01:00","created_by":"daemon"}]}
{"id":"django-litefs-71w","title":"Move Django configuration to pytest fixture","description":"Move Django setup from module import time to pytest fixture. Currently Django is configured at module import in tests/django_adapter/unit/__init__.py (lines 6-32), causing side effects and setup overhead for all tests.\n\nLocation: tests/django_adapter/unit/__init__.py (lines 6-32)\n\nImpact:\n- Django setup before any test runs (even tests that don't need it)\n- Side effects leak between test modules\n- If Django setup fails, ALL unit tests fail to import\n\nAction:\n1. Move Django setup code to tests/django_adapter/unit/conftest.py as session-scoped autouse fixture\n2. Empty tests/django_adapter/unit/__init__.py of all Django setup code\n3. Use settings.configure() within fixture with test-specific database\n\nVerification: pytest tests/django_adapter/unit/ -v passes with fixture-based setup","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:33:13.791123+01:00","updated_at":"2025-12-25T13:43:24.446714+01:00","closed_at":"2025-12-25T13:43:24.446714+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-828","title":"Create example Django app","description":"Create examples/django-app/ with working 3-node Docker Compose setup. Demonstrates LiteFS + Django integration, primary detection, write routing, and failover. ROADMAP task TASK-EXAM-001.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T23:46:34.431254+01:00","updated_at":"2025-12-26T00:18:21.893151+01:00","closed_at":"2025-12-26T00:18:21.893151+01:00","close_reason":"Already implemented"}
{"id":"django-litefs-8gt","title":"Write BDD step definitions for middleware - split-brain protection","description":"Create step definitions for split-brain protection scenarios (9 scenarios).\n\nLocation: tests/bdd/django/test_middleware.py\n\nCovers:\n- Request blocking during split-brain\n- Requests allowed when healthy/leaderless\n- Fail-open behavior\n- Signal integration\n- Leader election mode handling\n\nUses existing: SplitBrainMiddleware, FakeSplitBrainDetector\nTRA: BDD.Middleware.SplitBrainProtection","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:30:23.986397+01:00","updated_at":"2025-12-26T22:30:23.986397+01:00"}
{"id":"django-litefs-8oi","title":"Feature: LiteFS Django Database Backend BDD","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-26T22:14:38.39132+01:00","updated_at":"2025-12-26T22:14:38.39132+01:00","dependencies":[{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-5l8","type":"blocks","created_at":"2025-12-26T22:16:05.308011+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-dyc","type":"blocks","created_at":"2025-12-26T22:16:05.560526+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-aej","type":"blocks","created_at":"2025-12-26T22:16:05.802391+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-6nw","type":"blocks","created_at":"2025-12-26T22:16:06.032796+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-f8s","type":"blocks","created_at":"2025-12-26T22:16:06.257329+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-ulm","type":"blocks","created_at":"2025-12-26T22:16:06.477959+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-4zv","type":"blocks","created_at":"2025-12-26T22:16:06.69367+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-0tv","type":"blocks","created_at":"2025-12-26T22:16:06.923545+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-nqq","type":"blocks","created_at":"2025-12-26T22:16:07.148692+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8oi","depends_on_id":"django-litefs-zld","type":"blocks","created_at":"2025-12-26T22:16:07.375545+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8t1","title":"Add cursor extension tests for split-brain write blocking","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:40.986004+01:00","updated_at":"2025-12-25T23:54:56.860987+01:00","closed_at":"2025-12-25T23:54:56.860987+01:00","close_reason":"Tests verified and passing. For upc: 7 new concurrency tests added. For others: tests already existed with comprehensive coverage.","dependencies":[{"issue_id":"django-litefs-8t1","depends_on_id":"django-litefs-j74","type":"blocks","created_at":"2025-12-25T23:04:04.340609+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq","title":"Architecture Review Actions (2025-12-25)","description":"Actions identified from 5-agent parallel architecture review. Covers test organization, code deduplication, and configuration improvements.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T13:35:45.635115+01:00","updated_at":"2025-12-26T08:00:46.143795+01:00","closed_at":"2025-12-26T08:00:46.143795+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-8xq","depends_on_id":"django-litefs-xle","type":"blocks","created_at":"2025-12-25T14:34:10.351191+01:00","created_by":"daemon"},{"issue_id":"django-litefs-8xq","depends_on_id":"django-litefs-q29","type":"blocks","created_at":"2025-12-25T14:34:11.404489+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.1","title":"Delete stale tests/django/ directory","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:43:40.306366+01:00","updated_at":"2025-12-25T13:58:05.931753+01:00","closed_at":"2025-12-25T13:58:05.931755+01:00","dependencies":[{"issue_id":"django-litefs-8xq.1","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:40.309693+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.2","title":"Move Django configuration to pytest fixture","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:43:41.523396+01:00","updated_at":"2025-12-25T13:58:08.534347+01:00","closed_at":"2025-12-25T13:58:08.534349+01:00","dependencies":[{"issue_id":"django-litefs-8xq.2","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:41.523751+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.3","title":"Create core integration test directory and move concurrency tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:43:42.679633+01:00","updated_at":"2025-12-25T13:58:10.221316+01:00","closed_at":"2025-12-25T13:58:10.221319+01:00","dependencies":[{"issue_id":"django-litefs-8xq.3","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:42.680094+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.4","title":"Extract SQL detection logic to core","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T13:43:43.716826+01:00","updated_at":"2025-12-25T14:02:30.576104+01:00","closed_at":"2025-12-25T14:02:30.576106+01:00","dependencies":[{"issue_id":"django-litefs-8xq.4","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:43.718602+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.5","title":"Consolidate mount path validation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T13:43:44.767548+01:00","updated_at":"2025-12-25T14:02:30.735546+01:00","closed_at":"2025-12-25T14:02:30.735548+01:00","dependencies":[{"issue_id":"django-litefs-8xq.5","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:44.769332+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.6","title":"Make transaction mode configurable","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T13:43:45.974922+01:00","updated_at":"2025-12-25T14:02:30.892952+01:00","closed_at":"2025-12-25T14:02:30.892954+01:00","dependencies":[{"issue_id":"django-litefs-8xq.6","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:45.976442+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.7","title":"Add Django settings reset fixture","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T13:43:47.209291+01:00","updated_at":"2025-12-25T14:02:31.047706+01:00","closed_at":"2025-12-25T14:02:31.047709+01:00","dependencies":[{"issue_id":"django-litefs-8xq.7","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:47.210739+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.8","title":"Verify ports export in adapters __init__.py","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T13:43:48.469058+01:00","updated_at":"2025-12-25T14:02:31.204115+01:00","closed_at":"2025-12-25T14:02:31.204117+01:00","dependencies":[{"issue_id":"django-litefs-8xq.8","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:48.469549+01:00","created_by":"daemon"}]}
{"id":"django-litefs-8xq.9","title":"Document exception hierarchy intent","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T13:43:49.508998+01:00","updated_at":"2025-12-25T14:02:31.354611+01:00","closed_at":"2025-12-25T14:02:31.354613+01:00","dependencies":[{"issue_id":"django-litefs-8xq.9","depends_on_id":"django-litefs-8xq","type":"parent-child","created_at":"2025-12-25T13:43:49.509371+01:00","created_by":"daemon"}]}
{"id":"django-litefs-97j","title":"Add py-leader adapter contract test (RaftLeaderElectionAdapter satisfies port)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:11:23.197537+01:00","updated_at":"2025-12-25T23:38:29.949781+01:00","closed_at":"2025-12-25T23:38:29.949781+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-97j","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T23:11:35.525024+01:00","created_by":"daemon"}]}
{"id":"django-litefs-9dl","title":"Fix CTE SELECT false positive in is_write_operation","description":"Test: tests/django_adapter/unit/test_sql_properties.py::TestIsWriteOperationProperties::test_cte_select_not_write\n\nError: CTE WITH UPDATE AS (SELECT 1) SELECT is falsely detected as a write operation due to UPDATE keyword.\n\nThe SQL parser's regex is incorrectly matching the UPDATE keyword inside a CTE alias.\n\nDiscovered during: beads-work pipeline (2025-12-25)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-25T16:27:56.656058+01:00","updated_at":"2025-12-25T16:49:29.061161+01:00","closed_at":"2025-12-25T16:49:29.061161+01:00","close_reason":"Completed by beads-work pipeline"}
{"id":"django-litefs-9md","title":"Verify ports export in adapters __init__.py","description":"Verify that PrimaryDetectorPort is properly exported from packages/litefs/src/litefs/adapters/__init__.py. Tests import from litefs.adapters.ports but export may be missing or incomplete.\n\nLocation: packages/litefs/src/litefs/adapters/__init__.py\n\nAction:\nVerify file contains proper exports:\n  from .ports import PrimaryDetectorPort\n  __all__ = ['PrimaryDetectorPort']\n\nAlso update to include sql_detection exports (from related medium-priority task):\n  from .sql_detection import is_write_operation, strip_sql_comments\n  __all__ = ['PrimaryDetectorPort', 'is_write_operation', 'strip_sql_comments']\n\nVerification: Imports work correctly: from litefs.adapters import PrimaryDetectorPort","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T13:33:43.244009+01:00","updated_at":"2025-12-25T13:43:25.230442+01:00","closed_at":"2025-12-25T13:43:25.230442+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-9zs","title":"Add management commands (litefs_status, litefs_check)","description":"Add Django management commands: litefs_status (show node role, cluster status) and litefs_check (health checks for deploy readiness). ROADMAP task TASK-CMD-001.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T23:46:35.496656+01:00","updated_at":"2025-12-26T00:18:21.893945+01:00","closed_at":"2025-12-26T00:18:21.893945+01:00","close_reason":"Already implemented"}
{"id":"django-litefs-ac5","title":"Add SplitBrainDetector use case","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:58:14.175333+01:00","updated_at":"2025-12-25T23:22:56.191782+01:00","closed_at":"2025-12-25T23:22:56.191782+01:00","close_reason":"Completed by beads-work pipeline"}
{"id":"django-litefs-aej","title":"Write BDD step definitions for database backend - transaction mode","description":"Add step definitions for transaction mode scenarios (4 scenarios). Covers: defaults to IMMEDIATE, accepts IMMEDIATE/EXCLUSIVE, rejects invalid mode.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:03.148777+01:00","updated_at":"2025-12-26T22:15:03.148777+01:00"}
{"id":"django-litefs-ai7","title":"Add PyPI release automation workflow","description":"No automated PyPI publishing. Add GitHub Actions release workflow triggered on version tags. Build wheels for all 4 packages, publish to PyPI using trusted publisher (OIDC), create GitHub release.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T23:46:36.855431+01:00","updated_at":"2025-12-26T00:18:21.894676+01:00","closed_at":"2025-12-26T00:18:21.894676+01:00","close_reason":"Already implemented"}
{"id":"django-litefs-ame","title":"Create PrimaryInitializer use case","description":"Create litefs/usecases/primary_initializer.py that creates .primary file on startup if this node is designated primary. Handle race conditions and permission errors gracefully.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:12:47.020568+01:00","updated_at":"2025-12-25T14:14:01.290648+01:00","closed_at":"2025-12-25T14:14:01.290648+01:00","close_reason":"Closed","labels":["raft-001","usecases"],"dependencies":[{"issue_id":"django-litefs-ame","depends_on_id":"django-litefs-0r1","type":"blocks","created_at":"2025-12-25T14:13:06.551368+01:00","created_by":"daemon"}]}
{"id":"django-litefs-ass","title":"Write BDD step definitions for middleware - observability","description":"Create step definitions for observability scenarios (2 scenarios).\n\nLocation: tests/bdd/django/test_middleware.py\n\nCovers:\n- Forwarded requests are logged\n- Forwarding failures logged with details\n\nUses: WriteForwardingMiddleware, FakeLoggingAdapter\nTRA: BDD.Middleware.Observability","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:31:11.697175+01:00","updated_at":"2025-12-26T22:31:11.697175+01:00","dependencies":[{"issue_id":"django-litefs-ass","depends_on_id":"django-litefs-ujq","type":"blocks","created_at":"2025-12-26T22:31:52.980708+01:00","created_by":"daemon"}]}
{"id":"django-litefs-ayv","title":"Create test-architecture.yaml contract","description":"Initialize .claude/test-architecture.yaml with project-specific settings. Define TRA namespaces (Domain.Invariant, UseCase, Port, Adapter), tier definitions, execution contexts (pre-commit, ci-push, ci-main), and thresholds. Set enforcement to 'warn' initially for migration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T23:49:54.449635+01:00","updated_at":"2025-12-26T00:18:21.895432+01:00","closed_at":"2025-12-26T00:18:21.895432+01:00","close_reason":"Already implemented"}
{"id":"django-litefs-c3k","title":"Create core integration test directory and move concurrency tests","description":"Create tests/core/integration/ directory and move concurrency tests from tests/core/unit/usecases/test_primary_detector.py. Tests currently marked @pytest.mark.unit spawn threads with threading.Thread() and have filesystem race conditions, violating unit test requirements.\n\nLocation: tests/core/unit/usecases/test_primary_detector.py (lines 42-265)\n\nPer CLAUDE.md: 'Unit tests must NOT spawn subprocesses, access filesystem beyond temp dirs, or require FUSE/Docker.'\n\nAction:\n1. Create directory structure: tests/core/integration/usecases/\n2. Move concurrency tests to tests/core/integration/usecases/test_primary_detector_concurrency.py\n3. Update markers from @pytest.mark.unit to @pytest.mark.integration + @pytest.mark.concurrency\n4. Keep simple unit tests (lines 10-39) in original location\n\nVerification:\n- pytest -m unit runs fast (no threading tests)\n- pytest -m integration includes concurrency tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:33:16.159262+01:00","updated_at":"2025-12-25T13:43:24.57358+01:00","closed_at":"2025-12-25T13:43:24.57358+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-c7h","title":"Feature: Failover State Transitions","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T13:53:17.28036+01:00","updated_at":"2025-12-26T22:23:24.361472+01:00","closed_at":"2025-12-26T22:23:24.361472+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-c7h","depends_on_id":"django-litefs-c7h.1","type":"blocks","created_at":"2025-12-26T21:25:28.536372+01:00","created_by":"daemon"},{"issue_id":"django-litefs-c7h","depends_on_id":"django-litefs-c7h.2","type":"blocks","created_at":"2025-12-26T21:25:28.746846+01:00","created_by":"daemon"},{"issue_id":"django-litefs-c7h","depends_on_id":"django-litefs-c7h.3","type":"blocks","created_at":"2025-12-26T21:25:28.955126+01:00","created_by":"daemon"},{"issue_id":"django-litefs-c7h","depends_on_id":"django-litefs-c7h.4","type":"blocks","created_at":"2025-12-26T21:25:29.157325+01:00","created_by":"daemon"}]}
{"id":"django-litefs-c7h.1","title":"LoggingPort interface for structured logging","description":"Create LoggingPort in adapters/ports.py with warning() method. Required for BDD scenarios that assert 'warning is logged'. Location: packages/litefs/src/litefs/adapters/ports.py. TRA: Port.LoggingPort","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:23:04.333445+01:00","updated_at":"2025-12-26T21:59:12.103413+01:00","closed_at":"2025-12-26T21:59:12.103413+01:00","close_reason":"Closed"}
{"id":"django-litefs-c7h.2","title":"FakeLoggingAdapter for testing","description":"Create FakeLoggingAdapter that captures log messages for assertion. Records warnings in a list. Location: tests/core/unit/fakes/ or inline in test file. TRA: Tier 1","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:23:14.433376+01:00","updated_at":"2025-12-26T22:09:51.70517+01:00","closed_at":"2025-12-26T22:09:51.70517+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-c7h.2","depends_on_id":"django-litefs-c7h.1","type":"blocks","created_at":"2025-12-26T21:23:23.855385+01:00","created_by":"daemon"}]}
{"id":"django-litefs-c7h.3","title":"Inject LoggingPort into FailoverCoordinator","description":"Add optional LoggingPort dependency to FailoverCoordinator.__init__(). Log warnings when health or quorum blocks promotion. Location: packages/litefs/src/litefs/usecases/failover_coordinator.py. TRA: UseCase.FailoverCoordinator","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:23:15.501473+01:00","updated_at":"2025-12-26T22:09:51.710578+01:00","closed_at":"2025-12-26T22:09:51.710578+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-c7h.3","depends_on_id":"django-litefs-c7h.1","type":"blocks","created_at":"2025-12-26T21:23:24.055421+01:00","created_by":"daemon"}]}
{"id":"django-litefs-c7h.4","title":"Write step definitions for failover_transitions.feature","description":"Implement pytest-bdd step definitions in tests/bdd/core/test_failover_transitions.py. Steps should use mocks/fakes for LeaderElectionPort, HealthCheckerPort, LoggingPort. Reference existing test_failover_coordinator.py for mock patterns. TRA: BDD.FailoverTransitions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:23:44.77198+01:00","updated_at":"2025-12-26T22:23:11.420017+01:00","closed_at":"2025-12-26T22:23:11.420017+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-c7h.4","depends_on_id":"django-litefs-c7h.2","type":"blocks","created_at":"2025-12-26T21:23:51.53033+01:00","created_by":"daemon"},{"issue_id":"django-litefs-c7h.4","depends_on_id":"django-litefs-c7h.3","type":"blocks","created_at":"2025-12-26T21:23:51.745222+01:00","created_by":"daemon"}]}
{"id":"django-litefs-cip","title":"Update Django settings reader for static config","description":"Extend litefs_django/settings.py to map LITEFS['STATIC_PRIMARY_NODE_ID'] to static_config.primary_node_id. Support environment variable fallback.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:12:54.776024+01:00","updated_at":"2025-12-25T14:14:01.292405+01:00","closed_at":"2025-12-25T14:14:01.292405+01:00","close_reason":"Closed","labels":["django","raft-001"],"dependencies":[{"issue_id":"django-litefs-cip","depends_on_id":"django-litefs-0r1","type":"blocks","created_at":"2025-12-25T14:13:06.69835+01:00","created_by":"daemon"}]}
{"id":"django-litefs-cuo","title":"Extract SQL detection logic to core","description":"Extract _is_write_operation() and _strip_sql_comments() from Django backend to core package. Currently duplicated between production code and tests, breaking DRY principle.\n\nLocations:\n- packages/litefs-django/src/litefs_django/db/backends/litefs/base.py (lines 69-144)\n- tests/django_adapter/unit/test_db_backend_concurrency.py (lines 43-109)\n\nAction:\n1. Create packages/litefs/src/litefs/adapters/sql_detection.py with:\n   - strip_sql_comments(sql: str) -\u003e str\n   - is_write_operation(sql: str) -\u003e bool\n   - Regex patterns for block/line comments and CTE write keywords\n\n2. Update packages/litefs/src/litefs/adapters/__init__.py to export:\n   - from .ports import PrimaryDetectorPort\n   - from .sql_detection import is_write_operation, strip_sql_comments\n\n3. Update Django backend to import from litefs.adapters.sql_detection\n\n4. Remove duplicated code from test_db_backend_concurrency.py\n\nVerification: Tests pass importing from litefs.adapters.sql_detection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T13:33:26.892311+01:00","updated_at":"2025-12-25T13:43:24.704713+01:00","closed_at":"2025-12-25T13:43:24.704713+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-cux","title":"Add proxy configuration to LiteFSSettings and config generator","description":"## Context\nWhen using a load balancer in front of multiple Django nodes with LiteFS, read-your-writes consistency is critical. LiteFS has a built-in HTTP proxy that handles this automatically via TXID cookie tracking.\n\n## Requirements\n1. Add `ProxySettings` domain model to `litefs.domain.settings`:\n   - `addr`: Proxy listen address (e.g., ':8080')\n   - `target`: App address (e.g., 'localhost:8081')\n   - `db`: Database name for TXID tracking\n   - `passthrough`: List of URL patterns to bypass\n   - `primary_redirect_timeout`: Duration to hold writes during failover\n\n2. Add `proxy` field to `LiteFSSettings`\n\n3. Update `ConfigGenerator` to emit proxy section in litefs.yml\n\n4. Add Django settings support in `litefs_django.settings`:\n   ```python\n   LITEFS = {\n       'PROXY': {\n           'ADDR': ':8080',\n           'TARGET': 'localhost:8081',\n           'DB': 'db.sqlite3',\n           'PASSTHROUGH': ['/static/*', '*.css', '*.js'],\n       }\n   }\n   ```\n\n## Testing Scope\n**Unit tests for our code:**\n- ProxySettings validation (required fields, defaults, types)\n- ConfigGenerator emits valid proxy YAML section\n- Django settings reader parses PROXY config\n\n**NOT in scope (LiteFS responsibility):**\n- Actual TXID cookie behavior\n- Replica stalling/waiting\n- Write forwarding\n\n## Acceptance Criteria\n- [ ] ProxySettings value object with validation\n- [ ] Config generator emits valid proxy YAML\n- [ ] Django adapter reads PROXY settings\n- [ ] Unit tests for all components","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T00:48:43.127458+01:00","updated_at":"2025-12-26T01:10:25.04759+01:00","closed_at":"2025-12-26T01:10:25.04759+01:00","close_reason":"Closed"}
{"id":"django-litefs-def","title":"Add domain tests for RaftNodeState and RaftClusterState value objects","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:37.202616+01:00","updated_at":"2025-12-25T23:38:29.945759+01:00","closed_at":"2025-12-25T23:38:29.945759+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-def","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T23:04:03.88993+01:00","created_by":"daemon"}]}
{"id":"django-litefs-dl3","title":"Fix pre-existing test failure: test_round_trip_idempotence whitespace validation","description":"Discovered during beads-work discovery phase.\n\nTest: tests/django_adapter/unit/test_settings.py::TestSettingsReader::test_round_trip_idempotence\nError: LiteFSConfigError - database_name cannot be empty or whitespace-only\nCause: Property-based test (Hypothesis) generated carriage return '\\r' as whitespace-only test case for database_name\n\nThe settings reader should handle whitespace validation correctly, or the test strategy should exclude whitespace-only strings if that's intentional behavior.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T00:23:17.448149+01:00","updated_at":"2025-12-26T01:10:25.042242+01:00","closed_at":"2025-12-26T01:10:25.042242+01:00","close_reason":"Closed"}
{"id":"django-litefs-dp3","title":"Extend FailoverCoordinator with event emission","description":"Add optional event_emitter dependency to FailoverCoordinator. Emit events on state transitions, health-triggered demotions, quorum-loss demotions. Maintains backward compatibility (event_emitter is optional).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:53:41.028218+01:00","updated_at":"2025-12-26T21:16:06.636691+01:00","closed_at":"2025-12-26T21:16:06.636691+01:00","close_reason":"Already implemented: FailoverCoordinator.__init__ accepts event_emitter parameter and has _emit_event method","dependencies":[{"issue_id":"django-litefs-dp3","depends_on_id":"django-litefs-0qr","type":"blocks","created_at":"2025-12-26T13:54:04.397968+01:00","created_by":"daemon"},{"issue_id":"django-litefs-dp3","depends_on_id":"django-litefs-4m9","type":"blocks","created_at":"2025-12-26T13:54:04.564036+01:00","created_by":"daemon"}]}
{"id":"django-litefs-dyc","title":"Write BDD step definitions for database backend - mount path validation","description":"Create tests/bdd/django/test_database_backend.py with step definitions for mount path validation scenarios (4 scenarios). Covers: validates mount path exists, rejects missing, rejects inaccessible, requires mount_path in OPTIONS.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:14:55.226305+01:00","updated_at":"2025-12-26T22:14:55.226305+01:00"}
{"id":"django-litefs-eni","title":"Add GitHub Actions CI workflow","description":"Create .github/workflows/test.yml with tier-based test jobs: 1) test:fast - runs tier(0,1,2) on every push, 2) test:slow - runs tier(3) on merge to main, 3) test:manual - runs tier(4) on-demand. Include ruff linting, mypy type checking, Python 3.10/3.11/3.12 matrix. Use 'pytest -m tier(0) or tier(1) or tier(2)' for filtering.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T23:46:30.903845+01:00","updated_at":"2025-12-26T01:10:25.044794+01:00","closed_at":"2025-12-26T01:10:25.044794+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-eni","depends_on_id":"django-litefs-3j5","type":"blocks","created_at":"2025-12-25T23:50:09.597789+01:00","created_by":"daemon"}]}
{"id":"django-litefs-eru","title":"BDD step definitions for failover transitions","description":"Create step definitions for all Given/When/Then steps in failover_transitions.feature. Wire to FailoverCoordinator, MockLeaderElectionPort, MockEventEmitter. Location: tests/bdd/core/test_failover_transitions.py. TRA: BDD.FailoverTransitions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:14:57.863038+01:00","updated_at":"2025-12-26T21:16:13.216421+01:00","closed_at":"2025-12-26T21:16:13.216421+01:00","close_reason":"Duplicate of django-litefs-mel and django-litefs-rh3"}
{"id":"django-litefs-f8s","title":"Write BDD step definitions for database backend - split-brain protection","description":"Add step definitions for split-brain protection scenarios (4 scenarios). Covers: SplitBrainError on write during split-brain, split-brain check before primary check, read succeeds during split-brain, write succeeds when resolved.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:16.973393+01:00","updated_at":"2025-12-26T22:15:16.973393+01:00","dependencies":[{"issue_id":"django-litefs-f8s","depends_on_id":"django-litefs-5l8","type":"blocks","created_at":"2025-12-26T22:16:13.65727+01:00","created_by":"daemon"}]}
{"id":"django-litefs-g0l","title":"Add FastAPI health endpoint with split-brain field","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:58:16.306479+01:00","updated_at":"2025-12-25T23:38:29.951766+01:00","closed_at":"2025-12-25T23:38:29.951766+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-g0l","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T22:58:37.732513+01:00","created_by":"daemon"}]}
{"id":"django-litefs-gth","title":"Add TRA markers to all tests","description":"Add @pytest.mark.tra('Namespace.Anchor') to all 300+ tests. Map existing tests to TRA namespaces: Domain.Invariant.* for domain tests, UseCase.* for usecase tests, Port.* for port tests, Adapter.* for adapter tests. Every test must declare exactly one responsibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:49:55.806135+01:00","updated_at":"2025-12-26T00:45:21.382909+01:00","closed_at":"2025-12-26T00:45:21.382909+01:00","close_reason":"Tests pass, work complete","dependencies":[{"issue_id":"django-litefs-gth","depends_on_id":"django-litefs-ayv","type":"blocks","created_at":"2025-12-25T23:50:08.80393+01:00","created_by":"daemon"}]}
{"id":"django-litefs-h9m","title":"Feature: LiteFS Django Middleware BDD","description":"BDD specification for Django middleware: split-brain protection (existing) + write request forwarding (new). 47 scenarios covering request blocking, fail-open, signals, forwarding, error handling, configuration, and observability.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-26T22:29:23.316458+01:00","updated_at":"2025-12-26T22:29:23.316458+01:00","dependencies":[{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-619","type":"blocks","created_at":"2025-12-26T22:31:28.858662+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-pll","type":"blocks","created_at":"2025-12-26T22:31:29.069141+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-ir5","type":"blocks","created_at":"2025-12-26T22:31:29.281814+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-ujq","type":"blocks","created_at":"2025-12-26T22:31:29.505135+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-519","type":"blocks","created_at":"2025-12-26T22:31:29.722747+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-8gt","type":"blocks","created_at":"2025-12-26T22:31:29.943982+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-45i","type":"blocks","created_at":"2025-12-26T22:31:30.162256+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-oaj","type":"blocks","created_at":"2025-12-26T22:31:30.379616+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-21t","type":"blocks","created_at":"2025-12-26T22:31:30.597176+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-0p0","type":"blocks","created_at":"2025-12-26T22:31:30.820565+01:00","created_by":"daemon"},{"issue_id":"django-litefs-h9m","depends_on_id":"django-litefs-ass","type":"blocks","created_at":"2025-12-26T22:31:31.049143+01:00","created_by":"daemon"}]}
{"id":"django-litefs-ieo","title":"Add NodeIDResolver port","description":"Create NodeIDResolver protocol in adapters/ports.py with get_node_id() method. Implement EnvironmentVariableNodeIDResolver and HostnameNodeIDResolver for different deployment environments.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:12:51.426386+01:00","updated_at":"2025-12-25T14:14:01.291423+01:00","closed_at":"2025-12-25T14:14:01.291423+01:00","close_reason":"Closed","labels":["adapters","ports","raft-001"]}
{"id":"django-litefs-ir5","title":"Create FakeHttpForwardingAdapter for testing","description":"Create in-memory fake for HttpForwardingPort.\n\nLocation: tests/django_adapter/unit/fakes.py\n\nFeatures:\n- Records all forwarded requests for assertion\n- Configurable response (status, headers, body)\n- Configurable failures (timeout, unreachable, transient)\n- Retry tracking\n\nMethods:\n- forward_request() -\u003e ForwardingResponse\n- set_response(status, headers, body)\n- set_error(error_type: 'timeout' | 'unreachable' | 'transient')\n- get_forwarded_requests() -\u003e list[ForwardedRequest]\n\nEnables scenarios: All forwarding scenarios in test mode\nTRA: Fake.HttpForwardingAdapter","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:29:54.800549+01:00","updated_at":"2025-12-26T22:29:54.800549+01:00","dependencies":[{"issue_id":"django-litefs-ir5","depends_on_id":"django-litefs-pll","type":"blocks","created_at":"2025-12-26T22:31:39.986814+01:00","created_by":"daemon"}]}
{"id":"django-litefs-j74","title":"Extend database cursor to check split-brain before writes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:58:17.988913+01:00","updated_at":"2025-12-25T23:38:29.952659+01:00","closed_at":"2025-12-25T23:38:29.952659+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-j74","depends_on_id":"django-litefs-ac5","type":"blocks","created_at":"2025-12-25T22:58:37.862454+01:00","created_by":"daemon"}]}
{"id":"django-litefs-kos","title":"Document exception hierarchy intent","description":"Document why NotPrimaryError inherits from Django's DatabaseError. This is intentional for proper Django error handling but not documented.\n\nLocation: packages/litefs-django/src/litefs_django/exceptions.py\n\nProblem: Non-obvious inheritance choice may confuse future maintainers.\n\nAction:\nAdd docstring to NotPrimaryError explaining:\n- Inherits from django.db.DatabaseError intentionally\n- Enables proper Django error handling in transaction middleware\n- Supports debugging and exception propagation in Django context\n- Allows Django to treat as database-level error\n\nExample:\n'''\nRaised when a write operation is attempted on a replica node.\n\nInherits from django.db.DatabaseError intentionally for proper\nDjango error handling in transaction middleware, debugging, and\nexception propagation.\n'''\n\nVerification: Docstring present and clear","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T13:33:44.755285+01:00","updated_at":"2025-12-25T13:43:25.362412+01:00","closed_at":"2025-12-25T13:43:25.362412+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-kzk","title":"Add pre-commit configuration","description":"Create .pre-commit-config.yaml with: 1) ruff check + ruff format hooks, 2) pytest hook running only tier(0,1) tests with 2s timeout per test, 3) trailing whitespace + EOF newlines. Use 'pytest -m tier(0) or tier(1) --timeout=2 -x' for fast pre-commit feedback.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T23:46:32.095515+01:00","updated_at":"2025-12-26T01:10:25.046165+01:00","closed_at":"2025-12-26T01:10:25.046165+01:00","close_reason":"Closed","dependencies":[{"issue_id":"django-litefs-kzk","depends_on_id":"django-litefs-3j5","type":"blocks","created_at":"2025-12-25T23:50:09.450576+01:00","created_by":"daemon"}]}
{"id":"django-litefs-mel","title":"Write step definitions for failover_transitions.feature","description":"Implement pytest-bdd step definitions in tests/bdd/core/test_failover_transitions.py. Steps should use mocks/fakes for LeaderElectionPort and HealthCheckerPort. Reference existing test_failover_coordinator.py for mock patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:45:43.612261+01:00","updated_at":"2025-12-26T21:23:37.025288+01:00","closed_at":"2025-12-26T21:23:37.025288+01:00","close_reason":"Recreating with hierarchical ID under epic c7h","dependencies":[{"issue_id":"django-litefs-mel","depends_on_id":"django-litefs-paa","type":"blocks","created_at":"2025-12-26T13:46:03.682557+01:00","created_by":"daemon"}]}
{"id":"django-litefs-nqq","title":"Write BDD step definitions for database backend - connection lifecycle","description":"Add step definitions for connection lifecycle scenarios (2 scenarios). Verify cursor inherits detectors from connection and multiple cursors share same detector instances.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:44.826616+01:00","updated_at":"2025-12-26T22:15:44.826616+01:00"}
{"id":"django-litefs-nye","title":"Feature: Failover State Transitions","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T21:14:39.297887+01:00","updated_at":"2025-12-26T21:16:13.012357+01:00","closed_at":"2025-12-26T21:16:13.012357+01:00","close_reason":"Duplicate of django-litefs-c7h and django-litefs-smz","dependencies":[{"issue_id":"django-litefs-nye","depends_on_id":"django-litefs-eru","type":"blocks","created_at":"2025-12-26T21:15:04.994184+01:00","created_by":"daemon"}]}
{"id":"django-litefs-oaj","title":"Write BDD step definitions for middleware - forwarding behavior","description":"Create step definitions for request forwarding scenarios (7 scenarios).\n\nLocation: tests/bdd/django/test_middleware.py\n\nCovers:\n- Write request forwarded from replica to primary\n- Request body preservation\n- Header preservation\n- X-Forwarded-* headers added\n- Idempotency key handling\n\nUses: WriteForwardingMiddleware, FakeHttpForwardingAdapter\nTRA: BDD.Middleware.Forwarding","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:30:41.600807+01:00","updated_at":"2025-12-26T22:30:41.600807+01:00","dependencies":[{"issue_id":"django-litefs-oaj","depends_on_id":"django-litefs-ujq","type":"blocks","created_at":"2025-12-26T22:31:51.619702+01:00","created_by":"daemon"},{"issue_id":"django-litefs-oaj","depends_on_id":"django-litefs-ir5","type":"blocks","created_at":"2025-12-26T22:31:51.844959+01:00","created_by":"daemon"}]}
{"id":"django-litefs-obs","title":"Add Django settings reset fixture","description":"Add pytest fixture to reset Django state between tests. Currently if one test modifies Django settings or cache, it affects subsequent tests.\n\nLocation: tests/django_adapter/unit/conftest.py\n\nProblem: Test isolation - Django caches and settings can leak between tests.\n\nAction:\nAdd autouse fixture that:\n1. Clears Django cache after each test\n2. Resets any modified settings to original values\n3. Handles missing cache gracefully\n\nVerification: Tests pass with state isolation, no cross-test contamination","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T13:33:40.66954+01:00","updated_at":"2025-12-25T13:43:25.10222+01:00","closed_at":"2025-12-25T13:43:25.10222+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-paa","title":"Add event emission to FailoverCoordinator","description":"FailoverCoordinator needs to emit events for state transitions. Scenarios require: health-triggered demotion event, quorum-loss demotion event, and detection of redundant state changes. Add event_callback or observer pattern to FailoverCoordinator.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:45:50.137777+01:00","updated_at":"2025-12-26T14:09:08.31462+01:00","closed_at":"2025-12-26T14:09:08.31462+01:00","close_reason":"Closed"}
{"id":"django-litefs-pll","title":"Create HttpForwardingPort interface","description":"Create port interface for HTTP request forwarding.\n\nLocation: packages/litefs/src/litefs/adapters/ports.py\n\nInterface:\nclass HttpForwardingPort(Protocol):\n    def forward_request(\n        self,\n        method: str,\n        url: str,\n        headers: dict[str, str],\n        body: bytes | None,\n        timeout: float,\n    ) -\u003e ForwardingResponse: ...\n\nclass ForwardingResponse:\n    status_code: int\n    headers: dict[str, str]\n    body: bytes\n\nEnables scenarios: Write request forwarding, header preservation, body preservation\nTRA: Port.HttpForwardingPort","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:29:44.136894+01:00","updated_at":"2025-12-26T22:29:44.136894+01:00"}
{"id":"django-litefs-q29","title":"Phase 2: Raft Leader Election","description":"Epic for implementing Raft-based leader election with automatic failover, health checks, and multi-node Docker testing. Depends on Phase 1 (Static Leader Election) completion.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-25T14:27:35.129163+01:00","updated_at":"2025-12-26T01:10:26.393769+01:00","closed_at":"2025-12-26T01:10:26.393769+01:00","close_reason":"Closed","labels":["leadership","phase-2","raft"],"dependencies":[{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:28:01.755432+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.1","type":"blocks","created_at":"2025-12-25T14:44:00.325003+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.2","type":"blocks","created_at":"2025-12-25T14:44:00.624343+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.3","type":"blocks","created_at":"2025-12-25T14:44:00.952105+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.4","type":"blocks","created_at":"2025-12-25T14:44:01.298608+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.5","type":"blocks","created_at":"2025-12-25T14:44:01.612222+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.6","type":"blocks","created_at":"2025-12-25T14:44:01.922466+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.7","type":"blocks","created_at":"2025-12-25T14:44:02.250469+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.8","type":"blocks","created_at":"2025-12-25T14:44:02.58635+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.9","type":"blocks","created_at":"2025-12-25T14:44:02.921127+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.10","type":"blocks","created_at":"2025-12-25T14:44:03.252493+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29","depends_on_id":"django-litefs-q29.11","type":"blocks","created_at":"2025-12-25T14:44:03.611325+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.1","title":"Define RaftLeaderElectionPort in adapters/ports.py","description":"Define the RaftLeaderElectionPort interface that abstracts Raft election logic. This is a prerequisite for RAFT-002 task.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:27:41.387627+01:00","updated_at":"2025-12-25T16:49:29.062064+01:00","closed_at":"2025-12-25T16:49:29.062064+01:00","close_reason":"Completed by beads-work pipeline","labels":["architecture","ports","prereq","raft-002"],"dependencies":[{"issue_id":"django-litefs-q29.1","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:42.536739+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.10","title":"Add health checks with leader status","description":"Implement health check endpoint returning leader status, cluster state, replication lag. Expose via core PrimaryDetector. Depends on: HealthChecker use case (q29.4), Automatic failover (q29.9)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:27:49.261826+01:00","updated_at":"2025-12-25T23:38:29.953835+01:00","closed_at":"2025-12-25T23:38:29.953835+01:00","close_reason":"Closed","labels":["health","health-001","monitoring"],"dependencies":[{"issue_id":"django-litefs-q29.10","depends_on_id":"django-litefs-q29.4","type":"blocks","created_at":"2025-12-25T14:27:56.862739+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.10","depends_on_id":"django-litefs-q29.9","type":"blocks","created_at":"2025-12-25T14:27:56.997144+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.10","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.90971+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.11","title":"Write integration tests with multi-node Docker Compose","description":"Create comprehensive Docker Compose test suite: 3-node cluster, leader election, failover, partition healing. Depends on: ClusterFixture (q29.6), Automatic failover (q29.9), Health checks (q29.10)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:27:49.466545+01:00","updated_at":"2025-12-26T00:45:21.377358+01:00","closed_at":"2025-12-26T00:45:21.377358+01:00","close_reason":"Tests pass, work complete","labels":["docker","integration","test-002","testing"],"dependencies":[{"issue_id":"django-litefs-q29.11","depends_on_id":"django-litefs-q29.6","type":"blocks","created_at":"2025-12-25T14:27:57.132557+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.11","depends_on_id":"django-litefs-q29.9","type":"blocks","created_at":"2025-12-25T14:27:57.265557+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.11","depends_on_id":"django-litefs-q29.10","type":"blocks","created_at":"2025-12-25T14:27:57.401938+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.11","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:44.057234+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.2","title":"Create RaftSettings and QuorumPolicy value objects in domain","description":"Create immutable value objects for Raft configuration: RaftSettings (node ID, cluster members, quorum size) and QuorumPolicy (election timeouts, heartbeat intervals). Prerequisite for RAFT-003.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:27:41.536512+01:00","updated_at":"2025-12-25T16:52:53.229346+01:00","closed_at":"2025-12-25T16:52:53.229346+01:00","close_reason":"Completed - Created RaftSettings and QuorumPolicy value objects with 39 tests","labels":["domain","prereq","raft-003"],"dependencies":[{"issue_id":"django-litefs-q29.2","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:42.681828+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.3","title":"Create LeaderElectionPort abstraction (static vs raft)","description":"Define LeaderElectionPort that both StaticLeaderElection and RaftLeaderElection can implement. Allows switching between implementations. Prerequisite for CORE-002.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:27:41.683652+01:00","updated_at":"2025-12-25T16:49:33.991546+01:00","closed_at":"2025-12-25T16:49:33.991546+01:00","close_reason":"LeaderElectionPort already implemented by q29.5 (FailoverCoordinator task)","labels":["adapters","core-002","ports","prereq"],"dependencies":[{"issue_id":"django-litefs-q29.3","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:42.83644+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.4","title":"Create HealthChecker use case + HealthStatus value object","description":"Define HealthChecker use case and HealthStatus value object (healthy/unhealthy/degraded). Prerequisite for HEALTH-001.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:27:41.835881+01:00","updated_at":"2025-12-25T16:49:29.057163+01:00","closed_at":"2025-12-25T16:49:29.057163+01:00","close_reason":"Completed by beads-work pipeline","labels":["domain","health-001","prereq","usecases"],"dependencies":[{"issue_id":"django-litefs-q29.4","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.001991+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.5","title":"Create FailoverCoordinator use case","description":"Define FailoverCoordinator use case that coordinates leader election and state transitions. Prerequisite for RAFT-003.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:27:41.98546+01:00","updated_at":"2025-12-25T16:49:29.058586+01:00","closed_at":"2025-12-25T16:49:29.058586+01:00","close_reason":"Completed by beads-work pipeline","labels":["prereq","raft-003","usecases"],"dependencies":[{"issue_id":"django-litefs-q29.5","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.160049+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.6","title":"Create ClusterFixture repository for Docker tests","description":"Create reusable test fixture for spinning up multi-node Docker Compose clusters with health verification. Prerequisite for TEST-002.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:27:42.136734+01:00","updated_at":"2025-12-25T16:49:29.06019+01:00","closed_at":"2025-12-25T16:49:29.06019+01:00","close_reason":"Completed by beads-work pipeline","labels":["docker","prereq","test-002","testing"],"dependencies":[{"issue_id":"django-litefs-q29.6","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.30939+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.7","title":"Create py-leader package (Raft wrapper around PySyncObj)","description":"Create standalone py-leader package that wraps PySyncObj library. Implements RaftLeaderElectionPort interface. Handles quorum consensus, log replication, and automatic failover. Depends on: RaftLeaderElectionPort definition (q29.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:27:48.809027+01:00","updated_at":"2025-12-25T22:45:53.214786+01:00","closed_at":"2025-12-25T22:45:53.214786+01:00","close_reason":"Closed","labels":["core","raft","raft-002"],"dependencies":[{"issue_id":"django-litefs-q29.7","depends_on_id":"django-litefs-q29.1","type":"blocks","created_at":"2025-12-25T14:27:56.060869+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.7","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.458639+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.8","title":"Integrate py-leader into litefs-py as optional dependency","description":"Add py-leader as optional dependency to litefs-py core package. Create factory to instantiate RaftLeaderElection based on config. Export through litefs.__init__. Depends on: py-leader (q29.7) and LeaderElectionPort abstraction (q29.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:27:48.958894+01:00","updated_at":"2025-12-25T22:56:40.00332+01:00","closed_at":"2025-12-25T22:56:40.00332+01:00","close_reason":"py-leader integrated as optional dependency with factory function and tests","labels":["core","core-002","raft","raft-002"],"dependencies":[{"issue_id":"django-litefs-q29.8","depends_on_id":"django-litefs-q29.7","type":"blocks","created_at":"2025-12-25T14:27:56.197013+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.8","depends_on_id":"django-litefs-q29.3","type":"blocks","created_at":"2025-12-25T14:27:56.332282+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.8","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.613777+01:00","created_by":"daemon"}]}
{"id":"django-litefs-q29.9","title":"Implement automatic failover (3-node quorum)","description":"Implement failover logic: leader detection, health checks, graceful handoff. Handle network partitions with 3-node quorum consensus. Depends on: CORE-002 integration (q29.8), RaftSettings/QuorumPolicy (q29.2), FailoverCoordinator (q29.5)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:27:49.113214+01:00","updated_at":"2025-12-25T23:22:56.190096+01:00","closed_at":"2025-12-25T23:22:56.190096+01:00","close_reason":"Completed by beads-work pipeline","labels":["failover","raft","raft-003"],"dependencies":[{"issue_id":"django-litefs-q29.9","depends_on_id":"django-litefs-q29.8","type":"blocks","created_at":"2025-12-25T14:27:56.46645+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.9","depends_on_id":"django-litefs-q29.2","type":"blocks","created_at":"2025-12-25T14:27:56.595656+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.9","depends_on_id":"django-litefs-q29.5","type":"blocks","created_at":"2025-12-25T14:27:56.724757+01:00","created_by":"daemon"},{"issue_id":"django-litefs-q29.9","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:43.762588+01:00","created_by":"daemon"}]}
{"id":"django-litefs-rbo","title":"Delete stale tests/django/ directory","description":"Remove orphaned tests/django/ directory. Two parallel test hierarchies exist - tests/django/integration/ is stale while tests/django_adapter/ is active. The pytest.ini in litefs-django points to tests/django_adapter, making tests/django/ orphaned.\n\nAction:\n```bash\nrm -rf tests/django/\n```\n\nImpact:\n- Removes confusion about authoritative test location\n- Prevents new tests being added to wrong directory\n- Ensures CI only runs from active directory\n\nVerification: pytest --collect-only shows no tests from tests/django/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:33:12.292362+01:00","updated_at":"2025-12-25T13:43:24.317357+01:00","closed_at":"2025-12-25T13:43:24.317357+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-rh3","title":"Write step definitions for failover_transitions","description":"BDD step definitions for tests/features/core/failover_transitions.feature. Location: tests/bdd/core/test_failover_transitions.py. Uses FakeEventEmitter and FakeRaftLeaderElectionPort. Covers 8 scenarios: promotion, leadership maintenance, graceful handoff, health-aware failover, quorum-aware failover, idempotence.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:53:41.974857+01:00","updated_at":"2025-12-26T21:16:32.551853+01:00","closed_at":"2025-12-26T21:16:32.551853+01:00","close_reason":"Duplicate of django-litefs-mel - both are step definition tasks for same feature","dependencies":[{"issue_id":"django-litefs-rh3","depends_on_id":"django-litefs-svy","type":"blocks","created_at":"2025-12-26T13:54:04.727591+01:00","created_by":"daemon"},{"issue_id":"django-litefs-rh3","depends_on_id":"django-litefs-dp3","type":"blocks","created_at":"2025-12-26T13:54:04.900582+01:00","created_by":"daemon"}]}
{"id":"django-litefs-rt4","title":"Write unit tests for static leader election","description":"Add tests for StaticLeaderConfig validation, PrimaryInitializer behavior (success, race condition, permission error), and Django settings mapping.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:13:01.483273+01:00","updated_at":"2025-12-25T14:14:01.294146+01:00","closed_at":"2025-12-25T14:14:01.294146+01:00","close_reason":"Closed","labels":["raft-001","tests"],"dependencies":[{"issue_id":"django-litefs-rt4","depends_on_id":"django-litefs-0r1","type":"blocks","created_at":"2025-12-25T14:13:07.12137+01:00","created_by":"daemon"},{"issue_id":"django-litefs-rt4","depends_on_id":"django-litefs-ame","type":"blocks","created_at":"2025-12-25T14:13:07.263583+01:00","created_by":"daemon"},{"issue_id":"django-litefs-rt4","depends_on_id":"django-litefs-ieo","type":"blocks","created_at":"2025-12-25T14:13:07.418988+01:00","created_by":"daemon"},{"issue_id":"django-litefs-rt4","depends_on_id":"django-litefs-cip","type":"blocks","created_at":"2025-12-25T14:13:07.56355+01:00","created_by":"daemon"},{"issue_id":"django-litefs-rt4","depends_on_id":"django-litefs-5tc","type":"blocks","created_at":"2025-12-25T14:13:07.699231+01:00","created_by":"daemon"}]}
{"id":"django-litefs-smz","title":"Feature: Failover State Transitions BDD","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T13:45:27.369065+01:00","updated_at":"2025-12-26T21:16:52.872662+01:00","closed_at":"2025-12-26T21:16:52.872662+01:00","close_reason":"Duplicate of django-litefs-c7h - consolidating into single canonical epic","dependencies":[{"issue_id":"django-litefs-smz","depends_on_id":"django-litefs-mel","type":"blocks","created_at":"2025-12-26T13:46:03.361683+01:00","created_by":"daemon"},{"issue_id":"django-litefs-smz","depends_on_id":"django-litefs-paa","type":"blocks","created_at":"2025-12-26T13:46:03.522899+01:00","created_by":"daemon"}]}
{"id":"django-litefs-svy","title":"Create FakeEventEmitter for testing","description":"In-memory event collector for BDD tests. Records emitted events for assertion. Implements EventEmitterPort. Location: tests/bdd/fakes.py","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T13:53:40.044958+01:00","updated_at":"2025-12-26T21:16:26.50753+01:00","closed_at":"2025-12-26T21:16:26.50753+01:00","close_reason":"Already implemented: MockEventEmitter exists in tests/core/unit/usecases/test_failover_coordinator.py:197","dependencies":[{"issue_id":"django-litefs-svy","depends_on_id":"django-litefs-4m9","type":"blocks","created_at":"2025-12-26T13:54:04.236642+01:00","created_by":"daemon"}]}
{"id":"django-litefs-sza","title":"Fix pre-existing test failure: test_round_trip_idempotence","description":"Test: tests/core/unit/usecases/test_config_generator.py::TestConfigRoundTrip::test_round_trip_idempotence\n\nError: Property-based test failing in config generator (unrelated to current work).\n\nDiscovered during: beads-work pipeline execution (2025-12-25)\n\nThis failure existed before the current work and must be fixed.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T15:40:45.25934+01:00","updated_at":"2025-12-25T16:27:35.630028+01:00","closed_at":"2025-12-25T16:27:35.630028+01:00","close_reason":"Closed"}
{"id":"django-litefs-tmm","title":"Consolidate mount path validation","description":"Consolidate duplicate mount path existence validation. Currently checked twice per connection - in __init__ (line 239-245) and get_new_connection() (line 280-287).\n\nLocation: packages/litefs-django/src/litefs_django/db/backends/litefs/base.py\n\nProblem: Same validation performed redundantly.\n\nAction (Recommended):\nCreate LiteFSMountPath value object in packages/litefs/src/litefs/domain/mount_path.py:\n- Validates path exists on construction\n- Provides primary_file property for .primary file location\n- Use in both PrimaryDetector and DatabaseWrapper\n\nAlternative: Remove validation from __init__, keep only in get_new_connection() for fail-fast on actual connection.\n\nVerification: Single validation point, tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T13:33:28.093936+01:00","updated_at":"2025-12-25T13:43:24.839185+01:00","closed_at":"2025-12-25T13:43:24.839185+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-ujq","title":"Create WriteForwardingMiddleware","description":"Create Django middleware for forwarding write requests to primary.\n\nLocation: packages/litefs-django/src/litefs_django/middleware.py\n\nBehaviors:\n- Detect write requests (POST, PUT, PATCH, DELETE)\n- Forward to primary when on replica node\n- Preserve request body and headers\n- Add X-Forwarded-For, X-Forwarded-Host headers\n- Add X-Idempotency-Key for non-idempotent requests\n- Handle timeouts (504) and unreachable primary (503)\n- Respect path exclusions\n- Disabled by default\n- Skip when LiteFS disabled\n\nDependencies:\n- ForwardingSettings for configuration\n- HttpForwardingPort for actual forwarding\n- PrimaryDetectorPort for node role detection\n\nEnables scenarios: 28 write forwarding scenarios\nTRA: Adapter.WriteForwardingMiddleware","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:30:05.156952+01:00","updated_at":"2025-12-26T22:30:05.156952+01:00","dependencies":[{"issue_id":"django-litefs-ujq","depends_on_id":"django-litefs-619","type":"blocks","created_at":"2025-12-26T22:31:40.425781+01:00","created_by":"daemon"},{"issue_id":"django-litefs-ujq","depends_on_id":"django-litefs-pll","type":"blocks","created_at":"2025-12-26T22:31:40.648299+01:00","created_by":"daemon"}]}
{"id":"django-litefs-ulm","title":"Write BDD step definitions for database backend - cursor methods","description":"Add step definitions for cursor method scenarios (6 scenarios). Covers: execute(), executemany(), executescript() with primary and split-brain checks.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:24.166447+01:00","updated_at":"2025-12-26T22:15:24.166447+01:00","dependencies":[{"issue_id":"django-litefs-ulm","depends_on_id":"django-litefs-5l8","type":"blocks","created_at":"2025-12-26T22:16:13.878981+01:00","created_by":"daemon"}]}
{"id":"django-litefs-upc","title":"Add concurrency tests for thread-safe split-brain detection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:03:47.218872+01:00","updated_at":"2025-12-25T23:54:56.856518+01:00","closed_at":"2025-12-25T23:54:56.856518+01:00","close_reason":"Tests verified and passing. For upc: 7 new concurrency tests added. For others: tests already existed with comprehensive coverage.","dependencies":[{"issue_id":"django-litefs-upc","depends_on_id":"django-litefs-2i4","type":"blocks","created_at":"2025-12-25T23:04:06.468679+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xg0","title":"TASK-RAFT-001: Static Leader Election","description":"Implement static leader election with manual failover support for 2-node minimum deployments. This enables LiteFS replication without Raft consensus.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T14:12:40.671055+01:00","updated_at":"2025-12-25T16:33:01.256545+01:00","closed_at":"2025-12-25T16:33:01.256545+01:00","close_reason":"All 6 subtasks complete: StaticLeaderConfig, PrimaryInitializer, NodeIDResolver, Django settings, AppConfig, and comprehensive unit tests (79 tests).","dependencies":[{"issue_id":"django-litefs-xg0","depends_on_id":"django-litefs-xg0.1","type":"blocks","created_at":"2025-12-25T14:43:08.609968+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xg0","depends_on_id":"django-litefs-xg0.2","type":"blocks","created_at":"2025-12-25T14:43:08.766696+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xg0","depends_on_id":"django-litefs-xg0.3","type":"blocks","created_at":"2025-12-25T14:43:08.922598+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xg0","depends_on_id":"django-litefs-xg0.4","type":"blocks","created_at":"2025-12-25T14:43:09.078448+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xg0","depends_on_id":"django-litefs-xg0.5","type":"blocks","created_at":"2025-12-25T14:43:09.239956+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xg0","depends_on_id":"django-litefs-xg0.6","type":"blocks","created_at":"2025-12-25T14:43:09.387444+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xg0.1","title":"Add StaticLeaderConfig value object","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:14:05.978013+01:00","updated_at":"2025-12-25T15:21:01.947153+01:00","closed_at":"2025-12-25T15:21:01.947153+01:00","close_reason":"Closed","labels":["domain","raft-001"]}
{"id":"django-litefs-xg0.2","title":"Create PrimaryInitializer use case","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:14:07.085365+01:00","updated_at":"2025-12-25T15:40:16.15104+01:00","closed_at":"2025-12-25T15:40:16.15104+01:00","close_reason":"Closed","labels":["raft-001","usecases"],"dependencies":[{"issue_id":"django-litefs-xg0.2","depends_on_id":"django-litefs-xg0.1","type":"blocks","created_at":"2025-12-25T14:14:17.369851+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xg0.3","title":"Add NodeIDResolver port","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:14:08.330317+01:00","updated_at":"2025-12-25T15:40:16.152836+01:00","closed_at":"2025-12-25T15:40:16.152836+01:00","close_reason":"Closed","labels":["adapters","ports","raft-001"]}
{"id":"django-litefs-xg0.4","title":"Update Django settings reader for static config","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:14:09.372717+01:00","updated_at":"2025-12-25T15:40:16.153836+01:00","closed_at":"2025-12-25T15:40:16.153836+01:00","close_reason":"Closed","labels":["django","raft-001"],"dependencies":[{"issue_id":"django-litefs-xg0.4","depends_on_id":"django-litefs-xg0.1","type":"blocks","created_at":"2025-12-25T14:14:18.745455+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xg0.5","title":"Update Django AppConfig for primary initialization","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:14:10.583731+01:00","updated_at":"2025-12-25T16:27:35.628586+01:00","closed_at":"2025-12-25T16:27:35.628586+01:00","close_reason":"Closed","labels":["django","raft-001"],"dependencies":[{"issue_id":"django-litefs-xg0.5","depends_on_id":"django-litefs-xg0.2","type":"blocks","created_at":"2025-12-25T14:14:24.228478+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xg0.5","depends_on_id":"django-litefs-xg0.4","type":"blocks","created_at":"2025-12-25T14:14:25.240211+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xg0.6","title":"Write unit tests for static leader election","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:14:12.162592+01:00","updated_at":"2025-12-25T16:32:40.431987+01:00","closed_at":"2025-12-25T16:32:40.431987+01:00","close_reason":"Tests already complete from previous tasks (xg0.1-xg0.5). 79 unit tests covering domain, use case, adapter, and Django integration layers.","labels":["raft-001","tests"],"dependencies":[{"issue_id":"django-litefs-xg0.6","depends_on_id":"django-litefs-xg0.5","type":"blocks","created_at":"2025-12-25T14:14:26.337981+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xle","title":"Clean Architecture Port Definitions\n","description":"Address architectural gaps identified in ROADMAP.md review to maintain Clean Architecture compliance before Phase 2 and 3 implementation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T14:04:07.852826+01:00","updated_at":"2025-12-25T22:49:05.373888+01:00","closed_at":"2025-12-25T22:49:05.373888+01:00","close_reason":"All 5 subtasks completed: Raft config validation (xle.1), LeaderElectionPort (xle.2), RaftLeaderElectionAdapter (xle.3), FastAPI settings ACL (xle.4), and xg0 (Static Leader Election)","dependencies":[{"issue_id":"django-litefs-xle","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:13:13.617256+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xle","depends_on_id":"django-litefs-xle.1","type":"blocks","created_at":"2025-12-25T14:44:12.196224+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xle","depends_on_id":"django-litefs-xle.2","type":"blocks","created_at":"2025-12-25T14:44:12.515127+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xle","depends_on_id":"django-litefs-xle.3","type":"blocks","created_at":"2025-12-25T14:44:12.81034+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xle","depends_on_id":"django-litefs-xle.4","type":"blocks","created_at":"2025-12-25T14:44:13.083179+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xle.1","title":"Add Raft configuration validation to domain entity","description":"Add validation to LiteFSSettings that enforces raft_self_addr and raft_peers are present when leader_election=\"raft\". Consider extracting RaftConfig value object.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:04:12.896553+01:00","updated_at":"2025-12-25T16:49:29.062853+01:00","closed_at":"2025-12-25T16:49:29.062853+01:00","close_reason":"Completed by beads-work pipeline","labels":["architecture","domain","phase-1"],"dependencies":[{"issue_id":"django-litefs-xle.1","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:44.211243+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xle.2","title":"Define LeaderElectionPort interface","description":"Create LeaderElectionPort protocol in adapters/ports.py with start(), is_leader(), stop() methods. This ensures core has abstraction for Raft without direct py-leader imports.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T14:04:16.339945+01:00","updated_at":"2025-12-25T16:50:01.826058+01:00","closed_at":"2025-12-25T16:50:01.826058+01:00","close_reason":"LeaderElectionPort implemented by q29.5 with equivalent functionality (is_leader_elected, elect_as_leader, demote_from_leader). Start/stop lifecycle can be added later if needed.","labels":["architecture","phase-2","ports"],"dependencies":[{"issue_id":"django-litefs-xle.2","depends_on_id":"django-litefs-xle.1","type":"blocks","created_at":"2025-12-25T14:04:27.788656+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xle.2","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:44.368574+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xle.3","title":"Create RaftLeaderElectionAdapter","description":"Create thin adapter wrapping py-leader that implements LeaderElectionPort. Core never imports py-leader directly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:04:19.564807+01:00","updated_at":"2025-12-25T22:45:53.212816+01:00","closed_at":"2025-12-25T22:45:53.212816+01:00","close_reason":"Closed","labels":["adapters","architecture","phase-2"],"dependencies":[{"issue_id":"django-litefs-xle.3","depends_on_id":"django-litefs-xle.2","type":"blocks","created_at":"2025-12-25T14:04:27.938469+01:00","created_by":"daemon"},{"issue_id":"django-litefs-xle.3","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:44.524899+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xle.4","title":"Create FastAPI settings anti-corruption layer","description":"Create FastAPI settings reader that has zero Django imports. Ensure FastAPI adapter can coexist with Django adapter without cross-contamination.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T14:04:24.316767+01:00","updated_at":"2025-12-25T16:49:29.05944+01:00","closed_at":"2025-12-25T16:49:29.05944+01:00","close_reason":"Completed by beads-work pipeline","labels":["architecture","fastapi","phase-3"],"dependencies":[{"issue_id":"django-litefs-xle.4","depends_on_id":"django-litefs-xg0","type":"blocks","created_at":"2025-12-25T14:45:44.67801+01:00","created_by":"daemon"}]}
{"id":"django-litefs-xxn","title":"Make transaction mode configurable","description":"Make BEGIN IMMEDIATE transaction mode configurable. Currently hardcoded in base.py (lines 293-298), users cannot opt-out for specific transaction requirements.\n\nLocation: packages/litefs-django/src/litefs_django/db/backends/litefs/base.py\n\nAction:\n1. Add OPTIONS to Django database config:\n   DATABASES = {\n       'default': {\n           'ENGINE': 'litefs_django.db.backends.litefs',\n           'OPTIONS': {\n               'litefs_mount_path': '/var/lib/litefs',\n               'transaction_mode': 'IMMEDIATE',  # or 'DEFERRED' (default SQLite)\n           },\n       }\n   }\n\n2. Update get_new_connection() to read transaction_mode from settings_dict OPTIONS\n\n3. Apply mode at transaction level, not connection level (PRAGMA read_uncommitted, BEGIN mode)\n\nVerification: Tests pass with both IMMEDIATE and DEFERRED modes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T13:33:29.293182+01:00","updated_at":"2025-12-25T13:43:24.969508+01:00","closed_at":"2025-12-25T13:43:24.969508+01:00","close_reason":"Closed","labels":["architecture-review-2025"]}
{"id":"django-litefs-zaw","title":"Write RAFT_CONFIGURATION.md documentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:58:19.245744+01:00","updated_at":"2025-12-25T23:22:56.192917+01:00","closed_at":"2025-12-25T23:22:56.192917+01:00","close_reason":"Completed by beads-work pipeline"}
{"id":"django-litefs-zld","title":"Write BDD step definitions for database backend - Django ORM integration","description":"Add step definitions for Django ORM integration scenarios (5 scenarios). Verify model.save(), queryset.update(), queryset.delete() blocked on replica, queryset.filter() allowed. Requires test Django models and mock setup.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T22:15:53.827556+01:00","updated_at":"2025-12-26T22:15:53.827556+01:00"}
{"id":"django-litefs-zre","title":"Add missing @pytest.mark.tier() to test_adapters.py","description":"The new test_adapters.py file is missing TRA tier markers. Add appropriate @pytest.mark.tier() markers to the tests for StaticLeaderElection.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T07:51:28.65423+01:00","updated_at":"2025-12-26T08:00:46.139694+01:00","closed_at":"2025-12-26T08:00:46.139694+01:00","close_reason":"Closed"}
